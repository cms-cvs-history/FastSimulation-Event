process TEST =  {
    
    # The number of events to be processed.
    untracked PSet maxEvents = {untracked int32 input = 20}
    
    # The random number generator service
    service =  RandomNumberGeneratorService {
	untracked uint32 sourceSeed = 123456789
	# This is to initialize the random engine of Famos
	# Watch out! This works only if the FamosProducer label is "famosSimHits"
	PSet moduleSeeds =
	{
	    untracked uint32 famosSimHits = 13579
	    untracked uint32 famosPileUp = 24680
	}
    }

    // If you want to use the (CMS default) CLHEP random, 
    // set these ones to false
    replace famosPileUp.UseTRandomEngine = true
    replace famosSimHits.UseTRandomEngine = true

    # For histograms
    service = DaqMonitorROOTBackEnd{}		
    
    # Generate H -> ZZ -> l+l- l'+l'- (l,l'=e or mu), with mH=180GeV/c2
    # include "FastSimulation/Configuration/data/HZZllll.cfi"
#    include "FastSimulation/Configuration/data/QCDpt600-800.cfi"
    
    # Generate muons with a flat pT particle gun, and with pT=10.
    # include "FastSimulation/Configuration/data/FlatPtMuonGun.cfi"
    # replace FlatRandomPtGunSource.PGunParameters.PartID={13}
        
    /* */
    source = PoolSource
    {
	untracked uint32 skipEvents = 0
	# Number of events program should run
	untracked vstring fileNames = {
	    'file:/localscratch/pjanot/cmssw/CMSSW_1_6_8/src/FastSimulation/Event/test/andrea.root'
	#    'rfio:/castor/cern.ch/user/g/giamman/test/skimmed_sample.root'
	}
    }
    /* */
    
    module test = testEvent {
	
	# necessary to access true particles 
	PSet ParticleFilter = {
	    # Particles with |eta| > etaMax (momentum direction at primary vertex) 
	    # are not simulated 
	    double etaMax = 5.0
	    # Charged particles with pT < pTMin (GeV/c) are not simulated
	    double pTMin =  0.
	    # Particles with energy smaller than EMin (GeV) are not simulated
	    double EMin = 0.
	    # All protons with an energy larger with EProton (Gev) are kept
	    double EProton = 6000.
	}

	bool GeantInfo = false
    }
    
    include "FastSimulation/Configuration/data/FamosSequences.cff"
    replace VolumeBasedMagneticFieldESProducer.useParametrizedTrackerField = true
    replace famosSimHits.SimulateCalorimetry = false
    replace famosSimHits.SimulateTracking = false
    replace famosSimHits.MaterialEffects.PairProduction = false
    replace famosSimHits.MaterialEffects.Bremsstrahlung = false
    replace famosSimHits.MaterialEffects.EnergyLoss = false
    replace famosSimHits.MaterialEffects.MultipleScattering = false
    replace famosSimHits.MaterialEffects.NuclearInteraction = false
    replace famosPileUp.PileUpSimulator.averageNumber = 0.0
    
    path p = {
	famosPileUp,
	famosSimHits, 
	test
    }
}
